# ISO20022 PoC 

- **Team Name:** Open Smart Contract
- **Payment Address:** 3GTe5ArJLC8jesr6UFtB9kcoguQmvo8Cuo (BTC)
- **[Level](https://github.com/w3f/Grants-Program/tree/master#level_slider-levels):** 3


## Project Overview 

Response to [RFP 20022](https://github.com/w3f/Grants-Program/blob/master/docs/RFPs/Open/ISO_20022.md)

Project name: ISO20022 PoC

Cross border payment example as proof of concepts,leveraging the unique [Off-Chain Features of Substrate](https://docs.substrate.io/v3/concepts/off-chain-features/) that show the advantages of using [ISO20022](https://www.iso20022.org/) together with Substrate. 

### Overview

- The project is an [ISO20022](https://www.iso20022.org/) based cross-border payment proof of concepts implemented with Substrate off-chain features 
- A brief description: Proof of concepts of Dotsama / Substrate based ISO20022 compliant cross border payment example. 
- The project intends to use various Substrate pallets and off-chain workers / storage to implement an ISO20022 X-border payment example on a Polkadot / Kusama chain 
- ISO (International Organization for Standardization) 20022 is becoming the de facto global data standard for payments and electronic data interchange already adopted by many countries. Polkadot / Substrate based cross border payments can provide blockchain based payment efficiency, cost savings and interoperability with financial institutions, onramping billions of users to the ecossystem. 

### Project Details

- Mockups/designs of any UI components
	- 	Use Contracts-UI (or Polkadot.js) UI interface to interact with deployed smart contracts

- Data models / API specifications of the core functionality
	- ISO20022 XML data models that captures essential payment metadata 
	- ISO20022 data types to Polkadot data types / XCM mapping table
	- Data securedly stored offchain 
	- ISO20022 messaging and payment events and stats 
	- ISO20022 messaging and payment queries 
	- Benchmark on performance, throughput, gas fees, binary size, payment latency and cost comparisons 
- An overview of the technology stack to be used
	- Substrate Offchain workers to process compute intensive tasks such as ISO20022 message wrangling
	- Substrate offchain storage / indecing to persist string heavy ISO20022 messages
	- ISO20022 messages parsing / mapping / processing using OCWs
	- Substrate XCM for ISO20020 messaging  
	- Utility / Codec / RPC / etc.
	- X-border payment ink! smart contracts with access control security
	- Optional offchain connected cloud storage and HTTP requests 
- Documentation of core components, protocols, architecture, etc. to be deployed
	- Substrate based blockchain, including testchains to deploy as sandbox
	- ink! / Rust based smart contracts implementing X-border payment logic
	- Payment history along with ISO20022 messages stored offchian with indexing
	- Expensive ISO20020 related computation by offchian workers with onchain accessibility
	- ISO20022 messaging supported by XCMP with XCM <> ISO20020 data format translations  
	- ISO20022 messaging and payment events and stats 
	- ISO20022 messaging and payment queries 
- PoC/MVP or other relevant prior work or research on the topic
	- Our research shows that multiple gaps exist to support ISO20022 compliant cross border payment use case  
		- There's big ata type compatibility gaps between Polkadot and IS20022, such as date and time, currency, float, array, etc. 
		- There's no out of box support of SO20022 XML processing and mapping such as XSD transformations 
		- There's no built-in data validation, message routing, payment securties, etc.  
		- There's no native foreign exchanage / currency conversion capabilities
		- There's no payment states reflecting current cross border payment flow states 
		
- What your project is _not_ or will _not_ provide or implement
  - This is not a complete cross border payment system given the scope of proof of concepts 
  - Likely this is the first ISO20022 project on Dotsama, there could be unexpected gaps discovered
  - This project is not a full blown IS20022 implementation on Dotsama / Substrate but explore to expose gaps for future endeavors    
  - This project is not about payment identity / KYC / AML solutions 

### Ecosystem Fit

- Where and how does your project fit into the ecosystem?
	- According to the RDP: "The goal of this RFP is to find teams that implement tools that make it easy and possible for the traditional finance industry to leverage substrate and ink! smart contracts to interact with ISO 20022 in various ways"
- Who is your target audience (parachain/dapp/wallet/UI developers, designers, your own user base, some dapp's userbase, yourself)?
	- Targeting ecosystem develpopers to levearage on the learning and tools to further develop ISO20022 compitable dApps, to make it possible for transitional financial institutions to interoprate with Polkadot / Kusama / Substrate blockchains based payment apps. 
- What need(s) does your project meet?
	- Explore possibilities and gaps of Polkadot / Substrate support of ISO20022 standard for future improvements 
- Are there any other projects similar to yours in the Substrate / Polkadot / Kusama ecosystem?
  - If so, how is your project different?
  - If not, are there similar projects in related ecosystems? There are known blockchains already claim to support ISO20020 such as Ripple XRP, XLM, Algorand, etc. 

## Team 

### Team members

- Name of team leader: Daniel Deng

### Contact

- **Contact Name:** Daniel Deng
- **Contact Email:** OpenSmartContract@gmail.com

### Legal Structure

- **Registered Address:** No registred entity
- **Registered Legal Entity:** No registred entity

### Team's experience

Daniel is the Chief Product Officer at HeroDAO where he has led blockchain based smart contract products and development on Polkodot / Kusama blockchains. Previous at Meta he managed crypto (Libra / Diem) and fiat payments and web3 initiatives. Prior to that, he was Senior Director of Product Management at Visa managing Visa's global payment product portfolios and platforms.

Here's a recent[ Medium article](https://medium.com/@opensmartcontract/learn-ink-by-example-order-food-on-blockchain-a4024b2dee4a) on ink! smart contract with Rust macros implementing dApp on Dotsama chain, with [Smart Contract Deployment and Interaction Guide using Contracts-UI and Polkadot.js](https://github.com/InkSmartContract/BlockchainFoodOrder/blob/main/BlockchainFoodOrder%20Smart%20Contract%20Deployment%20and%20Interactions%20Guide.pdf).        

### Team Code Repos
- [Order Food on the Blockchain](https://github.com/InkSmartContract/BlockchainFoodOrder)

Please also provide the GitHub accounts of all team members. 
- [GitHub1](https://github.com/OpenSmartContract) 
- [Github2](https://github.com/FPLeader) 

### Team LinkedIn Profiles (if available)
- [Profile](https://www.linkedin.com/in/dengdaniel)

## Development Status 

- [RFPs](https://github.com/w3f/Grants-Program/tree/master/docs/RFPs) (requests for proposal)
- [Blockchain Food Order dApp](https://github.com/InkSmartContract/BlockchainFoodOrder/blob/main/Learn%20ink!%20by%20Example%20%E2%80%94%20Order%20Food%20on%20the%20Blockchain.pdf)
- [Smart Contract Deployment and Interaction Guide using Contracts-UI and Polkadot.js](https://github.com/InkSmartContract/BlockchainFoodOrder/blob/main/BlockchainFoodOrder%20Smart%20Contract%20Deployment%20and%20Interactions%20Guide.pdf)

## Development Roadmap 

### Overview

- **Total Estimated Duration:** ~3-6 months
- **Full-Time Equivalent (FTE):**  1,4 FTE
- **Total Costs:** 3 BTC 

### Milestone 1 Example — Basic functionality

- **Estimated duration:** ~1-2 months
- **FTE:**  1,2
- **Costs:** 0.95 BTC

| Number | Deliverable | Specification |
| -----: | ----------- | ------------- |
| **0a.** | License | Apache 2.0 |
| **0b.** | Documentation | Design documents with details on what it takes for Polkadot/Substrate to support ISO20022 messages, gaps and solution recommendations |
| 1. | Design the use case | Degine an ISO20022 cross border payment use case with persona, end-to-end flow | 
| 2. | Specify ISO20022 messages | Specify ISO20022 messages for each and every step of the cross border payment flow, including reference data fields besides core XML data | 
| 3. | ISO20022 XML <> Polkadot XCM data mapping | Identify data types gaps, XML<>XCM trnasformation and validations for the use case| 
| 4. | ISO20022 <> Polkadot messaging | Identify XCMP gaps in messaging, relaying, routing feasibilities for the use case | 
| 5. | Define offchain data storage | Define offchain data structure, storage and indexes for ISO20022 messages and payments in this use case |
| 6. | Define offchian worker module | Define OCW logic to handle ISO20022 messages mapping, processing, messaging in this use case |
| 7. | Define Smart contracts | Define ink! smart contracts to implement X-border payments and offchian integrations in this use case |
| 8. | Define ISO20022 messaging and payment events and stats | Define ISO20020 messaging and payment flow events and states |
| 9. | Define ISO20022 messaging and payment queries | Define how to query ISO20022 messaging and payments, based off events, stats, transactions and indexes stored offchain |


### Milestone 2 Example — Additional features

- **Estimated Duration:** ~2-4 months
- **FTE:**  1,4
- **Costs:** 2.05 BTC

| Number | Deliverable | Specification |
| -----: | ----------- | ------------- |
| **0a.** | License | Apache 2.0 |
| **0b.** | Documentation | We will provide both **inline comments** of the code and a Medium **article** that explains the use case and guide users to deploy and interact |
| **0c.** | Testing and Testing Guide | Unit and integration tests for core functions with test scripts |
| **0d.** | Docker | We will provide a docker file that can be used to test all the functionality |
| 0e. | Article | We will publish a Medium **article** about this PoC, and the feasibility of pairing up ISO20022 and Substrate offchian features to support ISO20020 payments, enabling potential financial institutions / fintech onramping to Dotsama ecosystem for blockchain based global ISO20020 compliant payments |
| 1. | Develop offchain data storage | Data structure, storage and indexing of X-border payment histories and ISO20022 messages |
| 2. | Develop offchian worker module | Logic to handle ISO20022 message mapping, processing, messaging |
| 3. | Develop Smart contracts | Set of ink! smart contracts that implements the cross border payment flow and offchian integrations, deploy on Shibuya test chain as sandbox |
| 4. | Support ISO20022 messaging and payment events and stats | Offchain logging, querying, diagnosing ISO20020 messaging and payment flow events and states |
| 5. | Develop ISO20022 messaging and payment queries | Implement querying ISO20022 messaging and payments, based off events, stats, transactions and indexes stored offchain |
| 6. | Develop Substrate module ISO20022 | Optional Substrate runtime module that implements ISO20022 message processing logic for better performance and efficiency if needed |
| 7. | Explore cloud storage and HTTP requests | Optional AWS S3 cloud storage as offchian storage extension for events / archives / scalability, and optional HTTP requests for potential future offchain queries / tranditional financial institution integrations / fiat+crypto payment flow / interoperabilities |
| 8. | Optimization and performance benchmark | Benchmark payment transaction throughput, measure binary foorprints, gas fees, cross border payment latencies in various optimizaiton implementations |
| 9. | Cross border payments comparisons | Compare end-to-end elapse time / costs, including latency / fee breakdowns, with real world fiat based cross border payments from traditional financial institutions if possible. Share comparison stats in a Medium article to be published |

## Future Plans

- Publish learning and share with the community, similar to this [ Medium article](https://medium.com/@opensmartcontract/learn-ink-by-example-order-food-on-blockchain-a4024b2dee4a) and/or [Contracts-UI and Polkadot.js Smart Contract Deployment and Interaction Guide](https://github.com/InkSmartContract/BlockchainFoodOrder/blob/main/BlockchainFoodOrder%20Smart%20Contract%20Deployment%20and%20Interactions%20Guide.pdf)
- Long term we intend to expand this ISO20022 PoC to:
	- develop reusable tools / features to bring ISO20022 compliant payments to the Dotsama ecosystem
	- Bring Polkadot / Kusama chains up to speed with Ripple XRP / XLM / Algorand / etc. on ISO20022 support
	- Onramp transitional financial institutions worldwide to blockchain enabled cross border payments 
	- Leverage Dotsama's unique offchain computing, storage and connections (cloud, HTTP) capabilities to scale web3 dApps
	- Support ISO20022 MX messages via Polkadot XCMP, and possible integration with IBC (Inter-Blockchain Communications)

## Referral Program (optional)

You can find more information about the program [here](../README.md#moneybag-referral-program).
- **Referrer:** N/A
- **Payment Address:**  N/A

## Additional Information 

**How did you hear about the Grants Program?** Web3 Foundation Website and previous work interactions 
